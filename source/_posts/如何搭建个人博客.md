---
title: hexo + volantis 搭建个人博客?
tags:
layout: post
seo_title: 如何搭建个人博客
keywords: 搭建个人博客 hexo
categories: 搭建个人博客
copyright: true
abbrlink: '9487'
date: 2021-06-25 13:36:46
photos: ['https://myblogger-1305472061.cos.ap-shanghai.myqcloud.com/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/headimg.png']
---

使用hexo快速搭建个人博客

<!-- more -->

**搭建博客的框架很多，个人比较偏向于hexo框架：**
- hexo只需要专注于写文档而不需要过分担心别的问题。
- hexo比较成熟，如果遇到问题也可以得到很好的解决。
- hexo使用github pages进行部署，不需要购买自己的服务器就可以部署到线上。
- hexo有很好的主题，如：volantis， yilia....


[hexo中文网站](https://hexo.io/zh-cn/)      [volantis主题官方文档](https://volantis.js.org/)



### 1. 搭建hexo环境

 **hexo是基于node开发的，首先需要安装node ，其次如果想要部署到github pages 需要安装git**


```powershell <1>安装淘宝镜像
sudo npm install -g cnpm --registry=https://registry.npm.taobao.org
```

```powershell <2>安装hexo-cli
sudo cnpm install -g hexo-cli
```

```powershell <3>检查是否安装成功
hexo -v
```


### 2. 创建hexo项目

**首先创建一个空的文件夹用于存放hexo项目代码，并在创建的目录中打开终端**
```powershell
mkdir <floder>
cd <floder>
hexo init

// 或者直接借助hexo去实现

hexo init <floder> // 这里hexo会自动创建文件夹并初始化项目
```

**安装依赖**
```powershell
npm install
```


### 3. 启动项目

**启动项目常用的命令**
```powershell
hexo clean // 清除项目中的临时文件
hexo g   // OR  hexo generate 生成临时文件
hexo s   // OR  hexo start  启动项目
```

**此时页面可以看到一个默认的博客模板并且有一篇默认的hello world 文章**


### 4. 新建一篇文章
```shell
hexo new "如何搭建个人博客"
```

### 5. 切换自己喜欢的主题
**这里以Volantis主题为例，具体的主题需要参照具体的官方文档来做**

- **下载主题插件**
```shell
npm i hexo-theme-volantis 
```

- **修改_config.yml中的 <span style="color:rgb(205,0,0)">theme</span> 字段为volantis**
```yml
theme: volantis
```
 
- **安装 Hexo 搜索的依赖包**
```shell
npm i hexo-generator-search hexo-generator-json-content
```

- **安装 Stylus 渲染器**
```shell
npm i hexo-renderer-stylus
```
**这样就可以看到精美的主题啦，之后的细节慢慢去调试成自己喜欢的样子（参考对应的官方文档）**

### 6. 部署到github pages

第一步： 在github上新建一个仓库，仓库的名字为：<用户名>.github.io  （必须）

第二步： 修改项目根目录下的_config.yml中的 <span style="color:rgb(205,0,0)">deploy</span> 字段为：
```yml
deploy:
  type: git
  repo: // 这里修改成自己的github仓库地址
  branch: master
```

第三步： 将代码部署到github pages 
```shell
hexo clean
hexo g // OR hexo generate
hexo d // OR hexo deploy
```
此时控制台会报错：<span style="color:rgb(255,0,0)">ERROR</span> Deployer not found: git
这是因为项目缺少git部署的插件
```shell
npm install --save hexo-deployer-git
```
执行以上的语句即可～～～～～～～然后重复第三步
此时就可以看到git仓库中已经有了一部分代码,神奇的是：
此时去访问：<用户名>.github.io 就可以看到线上的博客样式了。

{% link github pages demo, JingTao-Li.github.io, https://myblogger-1305472061.cos.ap-shanghai.myqcloud.com/github.png %}


### 7. 修改github page 为自定义的域名
![我的域名](https://myblogger-1305472061.cos.ap-shanghai.myqcloud.com/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/my-yuming.png)
**点击解析，添加对应的IP地址和CNAME**
![我的域名解析设置](https://myblogger-1305472061.cos.ap-shanghai.myqcloud.com/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/yuming-parse.png)
然后在当前项目的 source/ 目录下创建一个名叫 CNAME 的文件，里面的内容就是你的域名地址。接着重新部署一下就可以了。


### 8. 如何在项目中引入本地图片
**第一步：**安装插件：
```shell
npm install hexo-asset-image --save
```

**第二步：**打开根目录下的 _config.yml 文件，修改 <span style="color:rgb(205,0,0)">post_asset_folder</span> 字段为 **true**

**第三步：**打开 /node_modules/hexo-asset-image/index.js 文件，替换为以下代码：
```javascript
'use strict';
var cheerio = require('cheerio');

// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string
function getPosition(str, m, i) {
  return str.split(m, i).join(m).length;
}

var version = String(hexo.version).split('.');
hexo.extend.filter.register('after_post_render', function(data){
  var config = hexo.config;
  if(config.post_asset_folder){
        var link = data.permalink;
    if(version.length > 0 && Number(version[0]) == 3)
       var beginPos = getPosition(link, '/', 1) + 1;
    else
       var beginPos = getPosition(link, '/', 3) + 1;
    // In hexo 3.1.1, the permalink of "about" page is like ".../about/index.html".
    var endPos = link.lastIndexOf('/') + 1;
    link = link.substring(beginPos, endPos);

    var toprocess = ['excerpt', 'more', 'content'];
    for(var i = 0; i < toprocess.length; i++){
      var key = toprocess[i];
 
      var $ = cheerio.load(data[key], {
        ignoreWhitespace: false,
        xmlMode: false,
        lowerCaseTags: false,
        decodeEntities: false
      });

      $('img').each(function(){
        if ($(this).attr('src')){
            // For windows style path, we replace '\' to '/'.
            var src = $(this).attr('src').replace('\\', '/');
            if(!/http[s]*.*|\/\/.*/.test(src) &&
               !/^\s*\//.test(src)) {
              // For "about" page, the first part of "src" can't be removed.
              // In addition, to support multi-level local directory.
              var linkArray = link.split('/').filter(function(elem){
                return elem != '';
              });
              var srcArray = src.split('/').filter(function(elem){
                return elem != '' && elem != '.';
              });
              if(srcArray.length > 1)
                srcArray.shift();
              src = srcArray.join('/');
              $(this).attr('src', config.root + link + src);
              console.info&&console.info("update link as:-->"+config.root + link + src);
            }
        }else{
            console.info&&console.info("no src attr, skipped...");
            console.info&&console.info($(this));
        }
      });
      data[key] = $.html();
    }
  }
});
```

**第四步：**之后在新建一个新的文档内容的时候会自动生成一个同名文件夹，里面就可以放本页面需要的图片源文件，在需要的地方引入：
```markdown
![这是代替图片的文字，随便写](图片名字)
```

